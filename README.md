Repo to experiment while reading Spring 6 Recipes by Marten Deinum


### Transaction propagation types (Chapter 7)

| Propagation type | Description                                                                                                                                                                                                                                                                                                                                                                                                                             |
------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| **REQUIRED**         | Is default behaviour, if there's an existing transaction progress, the current method should run within (inuntru) this transaction. Otherwise, it should start a new transaction and run within its own transaction.                                                                                                                                                                                                                    |
| **REQUIRES_NEW**     | The current method must start a new transaction and run within its own transaction. If there's an existing transaction in progress, it should be suspended.                                                                                                                                                                                                                                                                             |
| **SUPPROTS**         | If there's an existing transaction in progress, the current method can run within this transaction, otherwise, it is not necessary to run within a transaction.                                                                                                                                                                                                                                                                         |
| **NOT_SUPPORSTED**   | The current method should not run within a transaction. If there's an existing transactionin progress, it should be suspended.                                                                                                                                                                                                                                                                                                          |
| **MANDATORY**        | The current method must run within a transaction. If thre's no existing transaction in progress, an exception will be thrown.                                                                                                                                                                                                                                                                                                           |
| **NEVER**            | The current method should not run within a transction. If thre's an existing transaction in progress, an exception will be thrown.                                                                                                                                                                                                                                                                                                      |
| **NESTED**           | If thres's an existing transaction in progress, the current method should run within the nested transaction of this transaction.<br/> The behaviour is useful for situations such as batch processing, in witch you've got a long running process and you want to chunk the commits on the batch. So you commit every 10000 records. If something goes wrong, you roll back the nested transaction, and you've lost only 10000 records. |



### Concurrent transaction problem types

| Problem name       | Description                                                                                                                                                                                                                                                                   |
--------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| **Dirty Read**         | For two transactions T1 and T2, T1 reads a field that has been updated by T2 but not yet commited. Latter, if T2 rolls back, the field read by T1 will be temporary and invalid                                                                                               |
| **Nonrepeatable Read** | For two transactions T1 and T2, T1 reads a field, and then T2 updates the field. Later, if T1 reads the same field again, the value will be different                                                                                                                         |
| **Phantom Read**       | For two transactions T1 and T2, T1 reads some rows from a table, and then T2 inserts new rows into the table. Later, if T1 reads the same table again, there will be additional rows.                                                                                         |
| **Lost Updates**       | For two transactions T1 and T2, they both select a row for update and, based on state of that row, make an update to it. Thus, one overites the other when the second transaction to commit should have waited until the first one committed before performing its selection. |


### Isolation Levels Supported by Spring

| Isolation            | Description                                                                                                                                                                                                                                                                                              |
----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| **Default**          | Uses the default isolation level of the underlying database. For most databases, the default isolation level is READ_COMMITTED.                                                                                                                                                                          |
| **READ_UNCOMMITTED** | Allows a transaction to read uncommited changes by other transactions. The **dirty read**, **nonrepeatable read** and **phantom read** problems may occur.                                                                                                                                               |
| **READ_COMMITTED**   | Allows a transaction to read only those changes that have been committed by other transactions. The **dirty read** problem can be avoided, but the **nonrepeatable read** and **phantom read** problems may still occur.                                                                                 |
| **REAPEATABLE_READ** | Ensure that a transaction can read identical values from a field multiple times. For the duration of this transaction, updates made by other thransactions to this field are prohibited. The **dirty read** and **nonrepeatable read** problems can be avoided, but phantom read problem may stil occur. |
| **SERIALIZABLE**     | Ensure that a transaction can read identical rows from a table mul tiple times. For the duration of this transaction, inserts, updates, adn deletes made by other transactions to this **table** are prohibited. All the concurrency problems ca be avoided, but the performance will be low.            |
